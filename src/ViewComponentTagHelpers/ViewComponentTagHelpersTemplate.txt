using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Rendering;
using Microsoft.AspNetCore.Mvc.ViewComponents;
using Microsoft.AspNetCore.Mvc.ViewFeatures;
using Microsoft.AspNetCore.Razor.TagHelpers;
using System.Threading.Tasks;
using System;
using System.Collections.Generic;
using System.Reflection;
using System.ComponentModel;

namespace ViewComponentTagHelpers
{
    [HtmlTargetElement("vc:[[HtmlTargetElement]]")]
    public class [[ViewComponentName]]ViewComponentTagHelpers: TagHelper
    {
        private readonly IViewComponentHelper _viewComponentHelper;

        public [[ViewComponentName]]ViewComponentTagHelpers(IViewComponentHelper viewComponentHelper)
        {
            _viewComponentHelper = viewComponentHelper;
        }

        [ViewContext]
        public ViewContext ViewContext { get; set; }

        [[CustomParameters]]

        public override async void Process(TagHelperContext context, TagHelperOutput output)
        {
            ((DefaultViewComponentHelper)_viewComponentHelper).Contextualize(ViewContext);
            var viewContent = await _viewComponentHelper.InvokeAsync("[[ViewComponentName]]", new {[[ParametersObject]]});
			output.TagName = "";
            output.Content.SetHtmlContent(viewContent);
        }
		
		#pragma warning disable 1998
        public virtual async Task ProcessAsync(TagHelperContext context, TagHelperOutput output)
        {
            Process(context, output);
        }
		
		#pragma warning restore 1998
    }
}